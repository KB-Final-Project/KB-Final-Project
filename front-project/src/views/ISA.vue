<template>
  <div class="container text-center">
    <div
      style="
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
        position: relative;
        height: 80px;
      "
    >
      <div
        style="
          flex-grow: 1;
          text-align: center;
          margin-top: 8px;
          margin-left: 500px;
        "
      >
        <h1
          style="
            margin: 0;
            display: inline;
            padding-top: 8px;
            font-weight: bold;
            font-size: 50px;
          "
        >
          ISA
        </h1>
        <p
          style="margin: 0; display: inline; font-size: 20px; margin-top: -5px"
        >
          ISA 하나로 모든 투자를 해결
        </p>
      </div>
      <img
        src="@/assets/img/isa1.png"
        alt="ISA위험성"
        style="
          height: auto;
          width: 57.5px;
          margin-right: 20px;
          margin-top: 5.5px;
        "
      />
      <img
        src="@/assets/img/isa2.png"
        alt="ISA위험성2"
        style="height: auto; width: 60px; margin-right: 20px; margin-top: 18px"
      />
      <img
        src="@/assets/img/isa3.png"
        alt="ISA위험성3"
        style="height: auto; width: 85px; margin-right: 8px; margin-top: 21px"
      />
    </div>

    <div
      class="outer-box"
      style="
        background-color: rgba(135, 140, 67, 0.06);
        border-radius: 30px;
        padding: 30px;
        width: 100%;
        max-width: 1600px;
        margin: auto;
        position: relative;
      "
    >
      <div
        style="
          margin-left: 20px;
          text-align: left;
          margin-top: 10px;
          background-color: transparent;
          border-radius: 30px;
          width: 600px;
          padding: 20px;
        "
      >
        <h2
          style="
            margin-left: 0px;
            font-weight: 600;
            font-size: 48px;
            color: #438c74;
          "
        >
          ISA 계좌란?
        </h2>
        <br />
        <p
          class="description"
          style="
            font-weight: 400;
            font-size: 33px;
            color: black;
            width: 100%;
            word-break: break-word;
          "
        >
          하나의 계좌로 다양한 금융상품을 관리하면서, 절세혜택도 누릴 수 있는
          <span style="font-weight: 600; font-size: 40px; color: #438c74"
            >"통합계좌"</span
          >입니다.
        </p>
        <p style="font-weight: 400; font-size: 15px; color: black">
          채권, 국내상장주식, 펀드, 리츠, ELS, RP 등 다양한 상품을 한 계좌에
          담아 본인의 투자 전략에 맞게 운용하면서 최대 400만원까지 비과세,
          초과분은 9.9% 분리과세 적용을 받을 수 있습니다.
        </p>
      </div>

      <div
        style="
          position: absolute;
          top: 40px;
          right: 45px;
          display: flex;
          align-items: flex-start;
        "
      >
        <div
          class="input-box"
          style="position: relative; width: 250px; height: 300px"
        >
          <div class="overlay-text" style="color: #438c74; font-size: 20px">
            조건 1
          </div>
          <div
            style="
              background-color: white;
              border-radius: 20px;
              padding: 10px;
              height: calc(100% - 35px);
              box-sizing: border-box;
              color: #438c74;
              display: flex;
              flex-direction: column;
              justify-content: center;
            "
          >
            <span style="font-size: 20px">만 19세 이상 또는</span>
            <span style="font-size: 20px">직전연도 근로소득이</span>
            <span style="font-size: 20px">있는 만 15~19세 미만</span>
            <span style="font-size: 20px">대한민국 거주자</span>
          </div>
        </div>

        <div
          style="
            font-size: 60px;
            font-weight: bold;
            color: #438c74;
            margin: 0 5px;
            margin-top: 80px;
          "
        >
          +
        </div>

        <div
          class="input-box"
          style="position: relative; width: 250px; height: 300px"
        >
          <div class="overlay-text" style="color: #438c74; font-size: 20px">
            조건 2
          </div>
          <div
            style="
              background-color: white;
              border-radius: 20px;
              padding: 10px;
              height: calc(100% - 35px);
              box-sizing: border-box;
              color: #438c74;
              display: flex;
              flex-direction: column;
              justify-content: center;
            "
          >
            <span style="font-size: 20px">직전 3개년 중 1회</span>
            <span style="font-size: 20px">이상 금융소득종합과세</span>
            <span style="font-size: 20px">대상이 아닌자</span>
          </div>
        </div>
      </div>

      <div
        style="
          width: 100%;
          max-width: 555px;
          background-color: rgba(68, 140, 116, 1);
          border-radius: 20px;
          padding: 20px;
          box-sizing: border-box;
          margin-left: 670px;
          position: relative;
          top: -70px;
          text-align: center;
        "
      >
        <span style="font-size: 23px; font-weight: bold; color: white"
          >조건 1과 조건 2가 충족 시 가입 가능 합니다!</span
        >
      </div>
    </div>

    <br />

    <div
      class="product-background"
      style="
        background-color: rgba(135, 140, 67, 0.06);
        border-radius: 30px;
        padding: 30px;
        width: 100%;
        max-width: 1813px;
        margin: auto;
        position: relative;
        height: 1450px;
      "
    >
      <h2
        style="
          margin-left: 65px;
          margin-top: 5px;
          text-align: left;
          margin-bottom: 40px;
          font-size: 40px;
          font-weight: bold;
        "
      >
        AROUND가 김수대 고객님에게 추천한 ISA
      </h2>

      <div
        class="itemBoxDiv"
        style="
          display: grid;
          grid-template-columns: repeat(3, 1fr);
          gap: 20px;
          justify-items: center;
          margin-bottom: 40px;
        "
      >
        <div
          v-for="i in 9"
          :key="i"
          class="itemBox"
          :style="{
            borderRadius: '30px',
            width: '370px',
            height: '370px',
            marginLeft: i % 3 === 1 ? '30px' : '',
            marginRight: i % 3 === 0 ? '25px' : '',
            marginTop: i > 3 ? '15px' : '',
          }"
        >
          <div class="p-3">상품 {{ i }}</div>
        </div>
      </div>

      <nav aria-label="Page navigation example" style="margin-bottom: 40px">
        <ul class="pagination" style="font-size: 20px">
          <li class="page-item" style="margin: 0 10px">
            <a href="#" class="page-link" style="padding: 10px 15px">이전</a>
          </li>
          <li class="page-item" style="margin: 0 10px">
            <a href="#" class="page-link" style="padding: 10px 15px">1</a>
          </li>
          <li
            class="page-item active"
            aria-current="page"
            style="margin: 0 10px"
          >
            <span class="page-link" style="padding: 10px 15px">2</span>
          </li>
          <li class="page-item" style="margin: 0 10px">
            <a href="#" class="page-link" style="padding: 10px 15px">3</a>
          </li>
          <li class="page-item" style="margin: 0 10px">
            <a href="#" class="page-link" style="padding: 10px 15px">다음</a>
          </li>
        </ul>
      </nav>
    </div>

    <br />

    <div
      class="product-background"
      style="
        background-color: rgba(135, 140, 67, 0.06);
        border-radius: 30px;
        padding: 30px;
        width: 100%;
        max-width: 1813px;
        margin: auto;
        position: relative;
      "
    >
      <h1
        style="
          margin-left: 65px;
          margin-top: 35px;
          text-align: left;
          margin-bottom: 40px;
          font-size: 40px;
          font-weight: bold;
        "
      >
        ISA 찾기
      </h1>

      <div
        class="search-section"
        style="position: relative; display: flex; align-items: center"
      >
        <h2
          class="d-inline search"
          style="margin-left: 100px; font-size: 33px; font-weight: bold"
        >
          상품 검색
        </h2>
        <div style="flex: 1">
          <input
            v-model="searchQuery"
            class="searchBar"
            type="text"
            placeholder="검색어를 입력해주세요"
            style="
              width: 85%;
              height: 65px;
              padding-right: 70px;
              margin-right: 60px;
              font-size: 16px;
              font-weight: bold;
            "
            @keyup.enter="searchProducts"
          />

          <button
            class="searchBtn"
            type="button"
            @click="searchProducts"
            style="
              position: absolute;
              right: 117px;
              top: 50%;
              transform: translateY(-50%);
              width: 75px;
              height: 40px;
              border-radius: 13px;
              background-color: rgba(68, 140, 116, 1);
              color: white;
              border: none;
              cursor: pointer;
              font-size: 16px;
            "
          >
            검색
          </button>
        </div>
      </div>

      <div v-if="searchQuery" class="search-results" style="margin-top: 20px">
        <h3 style="margin-right: 800px">
          {{ searchQuery ? '${searchQuery}' : '' }} 검색 결과
        </h3>
        <div v-if="filteredProducts.length === 0">검색 결과가 없습니다.</div>
        <div v-else>
          <div style="margin-top: 10px">
            <div
              v-for="(product, index) in paginatedProducts"
              :key="product.id"
            >
              <div style="padding: 10px; font-size: 18px">
                {{ product.name }}
              </div>
              <hr
                v-if="index < paginatedProducts.length - 1"
                style="border: 1px solid #ccc; margin: 5px 0"
              />
            </div>
          </div>
        </div>
      </div>

      <div
        v-if="searchQuery && paginatedProducts.length > 0"
        class="pagination-container"
        style="margin-top: 20px"
      >
        <nav aria-label="Page navigation example">
          <ul class="pagination">
            <li class="page-item" :class="{ disabled: currentPage === 1 }">
              <a
                href="#"
                class="page-link"
                @click.prevent="changePage(currentPage - 1)"
                >이전</a
              >
            </li>
            <li
              v-for="page in totalPages"
              :key="page"
              class="page-item"
              :class="{ active: currentPage === page }"
            >
              <a href="#" class="page-link" @click.prevent="changePage(page)">{{
                page
              }}</a>
            </li>
            <li
              class="page-item"
              :class="{ disabled: currentPage === totalPages }"
            >
              <a
                href="#"
                class="page-link"
                @click.prevent="changePage(currentPage + 1)"
                >다음</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';

const searchQuery = ref('');
const products = ref([
  { id: 1, name: '삼성전자' },
  { id: 2, name: '삼성물산' },
  { id: 3, name: '삼성 SDI' },
  { id: 4, name: 'LG전자' },
  { id: 5, name: '엘지전자' },
  { id: 6, name: '삼성전자' },
  { id: 7, name: '삼성전자' },
  { id: 8, name: '엘지전자' },
  { id: 9, name: '엘지전자' },
  { id: 10, name: '엘지전자' },
]);
const currentPage = ref(1);
const itemsPerPage = 3;

const filteredProducts = ref([]);

const searchProducts = () => {
  if (searchQuery.value) {
    filteredProducts.value = products.value.filter((product) =>
      product.name.includes(searchQuery.value)
    );
  } else {
    filteredProducts.value = [];
  }
};

const totalPages = computed(() => {
  return Math.ceil(filteredProducts.value.length / itemsPerPage);
});

const paginatedProducts = computed(() => {
  const start = (currentPage.value - 1) * itemsPerPage;
  return filteredProducts.value.slice(start, start + itemsPerPage);
});

const changePage = (page) => {
  if (page < 1 || page > totalPages.value) return;
  currentPage.value = page;
};
</script>

<style scoped>
.outer-box {
  position: relative;
  background-color: rgba(135, 140, 67, 0.06);
  border-radius: 30px;
  padding: 30px;
  width: 100%;
  max-width: 1600px;
}
.input-box {
  position: relative;
  width: 364px;
  height: 400px;
}
.overlay-text {
  position: absolute;
  top: 10px;
  left: 20px;
  color: #438c74;
  font-weight: bold;
  font-size: 20px;
}
.itemBox {
  border: 1px solid rgba(231, 236, 243, 1);
  border-radius: 30px;
  display: flex;
  justify-content: center;
  align-items: center;
  background-color: white;
  width: 164px;
  height: 164px;
}
.box {
  width: 120px; /* 박스 너비 */
  height: 120px; /* 박스 높이 */
  background-color: #e0e0e0; /* 박스 배경색 */
  border-radius: 15px; /* 모서리 둥글기 */
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 20px;
  color: black;
}
.searchBar {
  width: 50%;
  height: 50px;
  margin-left: 10px; /* 수정된 부분 */
  border: 1px solid rgba(215, 221, 227, 1);
  border-radius: 30px;
  padding: 0 10px; /* 수정된 부분 */
}
.searchBtn {
  height: 50px; /* 원래 높이로 복원 */
  margin-left: 10px;
  padding: 0 20px;
  border-radius: 5px;
  border: none;
  background-color: #438c74;
  color: white;
  cursor: pointer;
}
.searchBtn:active {
  background-color: lightgrey;
  color: black;
}
.pagination .page-link {
  color: rgba(68, 140, 116, 1);
}
.pagination .active > .page-link {
  background-color: rgba(68, 140, 116, 1);
  border: none;
}
.pagination .page-link:hover {
  color: white;
}
.pagination {
  --bs-pagination-color: rgba(68, 140, 116, 1);
  --bs-pagination-hover-color: rgba(68, 140, 116, 1);
}
</style>
